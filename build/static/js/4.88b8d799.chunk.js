(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[4],{30:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return f}));var n=r(31),a=r.n(n),c=r(32),s=r(33);function u(e,t,r){localStorage.setItem("user",JSON.stringify({accessToken:e,refreshToken:t,expires:r}))}function o(e){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.a)({method:"post",url:"/Auth/register",data:{lastName:t.lastName,firstName:t.firstName,patronymic:t.patronymic,userName:t.userName,password:t.password,confirmPassword:t.confirmPassword,phoneNumber:t.phoneNumber,email:t.email}});case 3:return u((r=e.sent).data.accessToken,r.data.refreshToken,r.data.expires),e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function l(e,t){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.a)({method:"post",url:"/Auth/login",data:{userName:t,password:r}});case 3:return u((n=e.sent).data.accessToken,n.data.refreshToken,n.data.expires),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function p(){localStorage.removeItem("user")}function f(){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("user")).refreshToken,r="/Auth/tokens/"+t+"/refresh",e.prev=2,e.next=5,Object(s.a)({method:"post",url:r});case 5:return u((n=e.sent).data.accessToken,n.data.refreshToken,n.data.expires),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}},33:function(e,t,r){"use strict";var n=r(35),a=r.n(n).a.create({baseURL:"https://api.bo.aa44.ru/api"});t.a=a},48:function(e,t,r){},68:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){},71:function(e,t,r){},72:function(e,t,r){},77:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return x}));r(48);var n=r(30),a=(r(68),r(3));function c(){return Object(a.jsx)("div",{className:"logout",onClick:n.b,children:"\u0412\u044b\u0439\u0442\u0438"})}function s(){var e=JSON.parse(localStorage.getItem("user"));return Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{children:e&&Object(a.jsx)(c,{})})]})}var u=r(31),o=r.n(u),i=r(32);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(o){a=!0,c=o}finally{try{n||null==u.return||u.return()}finally{if(a)throw c}}return r}}(e,t)||function(e,t){if(e){if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r(69);var p=r(0);r(70);function f(e){var t=e.isOpened,r=e.toggleModal,n=e.children;return!!t&&Object(a.jsx)("div",{className:"modal__wrapper",onClick:function(){return r(!1)},children:Object(a.jsxs)("div",{className:"modal",onClick:function(e){return e.stopPropagation()},children:[Object(a.jsx)("span",{className:"modal__close",onClick:function(){return r(!1)},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),n]})})}function b(e){var t=e.countryData,r=d(Object(p.useState)(!1),2),n=r[0],c=r[1];return Object(a.jsxs)("div",{className:"country_wrapper",children:[Object(a.jsxs)("div",{className:"country",onClick:function(){return c(!0)},children:[Object(a.jsx)("div",{className:"country__column",children:t.name}),Object(a.jsx)("div",{className:"country__column",children:t.currency.currencyCode}),Object(a.jsx)("div",{className:"country__column",children:t.currency.shortName})]}),Object(a.jsxs)(f,{isOpened:n,toggleModal:c,children:[Object(a.jsx)("div",{children:t.name}),Object(a.jsx)("div",{children:t.currency.currencyCode}),Object(a.jsx)("div",{children:t.currency.shortName})]})]})}var h=r(1),j=r(33);function m(){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(localStorage.getItem("user"))){e.next=3;break}return e.abrupt("return",0);case 3:return e.prev=3,e.next=6,Object(j.a)({method:"get",url:"/Countries",headers:{Authorization:"Bearer "+t.accessToken}});case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(3),console.log(e.t0),e.next=15,Object(n.c)();case 15:if(!e.sent){e.next=19;break}return e.abrupt("return",1);case 19:return Object(n.b)(),e.abrupt("return",0);case 21:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}r(71);function O(){var e=d(Object(p.useState)(null),2),t=e[0],r=e[1],c=d(Object(p.useState)(!1),2),s=c[0],u=c[1],l=d(Object(p.useState)(!0),2),f=l[0],j=l[1];return Object(p.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:if(a=e.sent,t||1!==a){e.next=7;break}return e.next=6,m();case 6:a=e.sent;case 7:t||(1===a?(Object(n.b)(),u(!0)):a?r(a.data):u(!0)),j(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=!1;return function(){e.apply(this,arguments)}(),function(){return t=!0}}),[t]),f?Object(a.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}):Object(a.jsxs)("div",{className:"countries",children:[Object(a.jsxs)("div",{className:"countries__header",children:[Object(a.jsx)("div",{className:"countries__column",children:"Name"}),Object(a.jsx)("div",{className:"countries__column",children:"CurrencyCode"}),Object(a.jsx)("div",{className:"countries__column",children:"ShortName"})]}),t?t.data.map((function(e){return Object(a.jsx)(b,{countryData:e},e.id)})):Object(a.jsx)("div",{children:"\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),s&&Object(a.jsx)(h.a,{to:"/login"})]})}r(72);function x(){return Object(a.jsxs)("div",{className:"home-page",children:[Object(a.jsx)(s,{}),Object(a.jsx)(O,{})]})}}}]);
//# sourceMappingURL=4.88b8d799.chunk.js.map